/* assets/assets/printable.css の修正版 */

/* --- 1. 全体設定（背景色などをリセット） --- */
@media all {
    .printable-container {
        background-color: #f0f2f5;
        padding: 30px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
}

/* --- 2. プレビュー（画面表示）用の設定 --- */
@media screen {
    .printable-page {
        background: white;
        width: 210mm;          /* A4縦の幅 */
        min-height: 297mm;     /* A4縦の高さ */
        padding: 15mm;         /* ページ内の余白 */
        margin-bottom: 30px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
        box-sizing: border-box;
        overflow: hidden;
    }
}

/* --- 3. 印刷時の設定（プレビューに完全に合わせる） --- */
@media print {
    @page {
        size: A4 portrait;     /* A4縦を強制 */
        margin: 0 !important;  /* ブラウザの余白を消去 */
    }

    /* 印刷に関係ないWEB要素を消す */
    #report-header, .no-print, .btn, .dash-loading, #navbar-container {
        display: none !important;
    }

    body {
        background: white !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .printable-container {
        padding: 0 !important;
        display: block !important;
    }

    .printable-page {
        width: 210mm !important;
        height: 297mm !important;
        padding: 15mm !important; /* プレビューと同じ余白 */
        margin: 0 !important;
        page-break-after: always; /* ページごとに改ページ */
        box-sizing: border-box;
        border: none !important;
        box-shadow: none !important;
    }

    /* BootstrapのRowが印刷時に縦に並ぶのを防ぐ */
    .row {
        display: flex !important;
        flex-wrap: nowrap !important;
    }

    .js-plotly-plot {
        width: 100% !important;
        /* 高さを固定値(250px)から「コンテンツに応じた最小値」に変更 */
        height: auto !important; 
        min-height: 350px !important; /* 少し余裕を持たせる */
        page-break-inside: avoid !important;
    }

    .js-plotly-plot svg,
    .js-plotly-plot svg.main-svg {
        width: 100% !important;
        /* svg自体の高さも100%にしてコンテナに追従させる */
        height: 100% !important; 
    }
}

/* --- 4. グラフと要素の調整 --- */
.js-plotly-plot {
    width: 100% !important;
    height: auto !important;
}

.comment-print-box {
    border: 1px solid #dee2e6;
    padding: 10px;
    min-height: 200px;
    font-size: 10pt;
    white-space: pre-wrap;
    background: #fff;
}